document.addEventListener("DOMContentLoaded",()=>{"serviceWorker"in navigator?navigator.serviceWorker.register("./sw.js",{scope:"/Aquanotes/"}).then(()=>console.log("Service worker registered")).catch(e=>console.log("Service worker not registered",e)):alert("Please update or switch to modern browser to have the ultimate experience of the web!"),function(){return["fullscreen","standalone","minimal-ui"].some(e=>{window.matchMedia("(display-mode: "+e+")").matches,console.log(e)})}&&console.log("true");const e=document.querySelector("#theme-toggler"),t=null!==localStorage.getItem("theme")&&"dark"===localStorage.getItem("theme");e.checked=t,t?document.documentElement.setAttribute("data-theme","dark"):document.documentElement.removeAttribute("data-theme"),e.addEventListener("change",()=>{e.checked?(document.documentElement.setAttribute("data-theme","dark"),document.querySelectorAll(".status-bar").forEach(e=>{e.setAttribute("content",getComputedStyle(document.documentElement,'html[data-theme="dark"]').getPropertyValue("--bg-color"))}),localStorage.setItem("theme","dark")):(document.documentElement.removeAttribute("data-theme"),document.querySelectorAll(".status-bar").forEach(e=>{e.setAttribute("content",getComputedStyle(document.documentElement,":root").getPropertyValue("--bg-color"))}),localStorage.removeItem("theme"))}),null!==localStorage.getItem("theme")&&(document.documentElement.setAttribute("data-theme","dark"),document.querySelectorAll(".status-bar").forEach(e=>{e.setAttribute("content","#000000")}));const o=()=>{let e=new Date,t=e.getDay(),n=e.getDate(),l=e.getMonth(),a=e.getFullYear(),r=e.getHours(),c=e.getMinutes(),s=e.getSeconds(),m="am",i=document.querySelectorAll(".days > span");for(x in i){var g=i[x].classList;void 0!==g&&(x==t?g.add("light-on"):g.remove("light-on"))}r>=12&&(12===r?r=12:r-=12,m="pm"),0==r&&(r=12),n=n<=9?`0${n}`:n,r=r<=9?`0${r}`:r,c=c<=9?`0${c}`:c,s=s<=9?`0${s}`:s,document.querySelector(".hours").textContent=r,document.querySelector(".minutes").textContent=c,document.querySelector(".seconds").textContent=s,document.querySelector(".am-pm").textContent=m,document.querySelector(".current-date").textContent=n,document.querySelector(".month").textContent=`${["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][l]}`,document.querySelector(".year").textContent=a,requestAnimationFrame(o)};o(),function(e){Array.from(document.querySelectorAll(e)).forEach(e=>{const t=document.createElement("div");t.classList.add("clicked"),e.addEventListener("click",o=>{const n=o.pageX-this.offsetLeft,l=o.pageY-this.offsetTop;t.style.cssText=`--x: ${n}; \n                      --y: ${l};`,e.insertAdjacentElement("beforeend",t)}),e.addEventListener("animationend",()=>{e.querySelector(".clicked")&&e.removeChild(t)})})}(".wavy-btn");const n=document.querySelector("#water-calculator"),l=n.querySelector(".output");n.addEventListener("submit",e=>{e.stopPropagation(),e.preventDefault();const t=` Drink ${(2.205*n.weight.value/2.2*n.age.value/28.3*29.574/1e3).toFixed(2)} liters of water daily!`;let o=0;!function e(t,n){if(o==t.length)return;let l=t.split("");n.textContent+=l[o],o++,requestAnimationFrame(()=>e(t,n))}(t,l),l.textContent="",n.reset()});const a=document.querySelector(".form-goal"),r=document.querySelector("#goal-inp"),c=document.querySelector(".goal-label"),s=document.querySelector("#glass-size"),m=document.querySelector(".to-dos"),i=document.querySelector(".intake-amount"),g=document.querySelector(".done"),u=document.querySelector(".remaining"),d=["Drink Right When You Wake Up","Try Not to Eat Until 30-40 Minutes After Drinking","Drink Before You Eat","DON'T: Drown Your Stomach During Mealtime","Drink Before and After a Workout","DON'T: Drink Too Much During a Workout","Drink Before Bath Time","Drink Before Bedtime","DON'T: Drink While Standing or Running","Drink When Youâ€™re Tired"],S=()=>{let e=parseFloat(r.value).toFixed(2);parseInt(e)<10?c.textContent=`0${e}`:c.textContent=e,i.querySelector(".ml").textContent=`${1e3*e}ml`,i.querySelector(".count-glass").textContent=`${Math.round(1e3*e/s.value)}`},p=e=>{e=e||1e3,document.querySelectorAll(".item>input").forEach(t=>{t.addEventListener("change",()=>{t.parentElement.classList.toggle("checked"),localStorage.removeItem(`${t.id}`),localStorage.setItem("done",`${parseInt(localStorage.getItem("done"))+1}`),localStorage.setItem("remaining",`${parseInt(localStorage.getItem("globGlass"))-parseInt(localStorage.getItem("done"))}`),g.textContent=parseInt(localStorage.getItem("done"))<10?`0${localStorage.getItem("done")}`:localStorage.getItem("done"),u.textContent=parseInt(localStorage.getItem("remaining"))<10?`0${localStorage.getItem("remaining")}`:localStorage.getItem("remaining"),setTimeout(()=>{t.parentElement.parentElement.removeChild(t.parentElement),0===m.children.length&&m.insertAdjacentHTML("beforeend",'<h1 class="text-center num-font">Congratulations!</h1>')},e),localStorage.getItem("done")===localStorage.getItem("globGlass")&&(localStorage.removeItem("done"),localStorage.removeItem("remaining"))})})},h=()=>{Array.from(s.options).forEach(e=>{e.removeAttribute("selected"),e.value===localStorage.getItem("prevGlass")&&e.setAttribute("selected","true")})};if(S(),r.addEventListener("input",S),a.addEventListener("submit",e=>{e.stopPropagation(),e.preventDefault();const t=1e3*parseFloat(`${r.value}`),o=Math.round(t/s.value);for(localStorage.setItem("globGlass",o),localStorage.setItem("prevGoal",r.value),localStorage.setItem("prevGlass",s.value),localStorage.setItem("done",0),localStorage.setItem("remaining",o),document.querySelector(".intake-amount").setAttribute("title",`1 glass = ${s.value}ml`),i.querySelector(".ml").textContent=`${t}ml`,i.querySelector(".count-glass").textContent=`${o}`;m.firstChild;)m.removeChild(m.firstChild);for(let e=0;e<o;e++){const t=`<label for="item-${e}" class="item checkbox-label position-relative d-flex justify-content-between align-items-center mb-3 py-3 px-4 curved-radius mx-2">\n            <div class="">\n                <h4 class="">Glass no <span class="num-font font-weight-bold color-label-bg">${e+1}</span></h4>\n                <p class="drink-tips small mb-0">\n                    <svg class="caret-svg mr-2" viewBox="0 0 16 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg">\n                        <path d="M12.14 8.753l-5.482 4.796c-.646.566-1.658.106-1.658-.753V3.204a1 1 0 011.659-.753l5.48 4.796a1 1 0 010 1.506z"/>\n                    </svg>\n                    ${d[(n=0,l=9,Math.floor(Math.random()*(l-n+1)+n))]}\n                </p>\n            </div>\n            <input id="item-${e}" type="checkbox" class="sr-only">\n            <div class="position-relative checkbox">\n                <svg class="checkbox-svg" viewBox="0 0 20 20">\n                    <path d="M3,1 L17,1 L17,1 C18.1045695,1 19,1.8954305 19,3 L19,17 L19,17 C19,18.1045695 18.1045695,19 17,19 L3,19 L3,19 C1.8954305,19 1,18.1045695 1,17 L1,3 L1,3 C1,1.8954305 1.8954305,1 3,1 Z"></path>\n                    <polyline points="4 11 8 15 16 6"></polyline>\n                </svg>\n            </div>\n            <p class="position-absolute  small task-msg mb-0">Well done!</p>\n        </label>`;m.insertAdjacentHTML("beforeend",t),localStorage.setItem(`item-${e}`,t)}var n,l;p(),g.textContent=parseInt(localStorage.getItem("done"))<10?`0${localStorage.getItem("done")}`:localStorage.getItem("done"),u.textContent=parseInt(localStorage.getItem("remaining"))<10?`0${localStorage.getItem("remaining")}`:localStorage.getItem("remaining"),r.setAttribute("value",`${r.value}`),h()}),null!==localStorage.getItem("prevGoal")&&null!==localStorage.getItem("prevGlass")&&(r.setAttribute("value",`${localStorage.getItem("prevGoal")}`),S(),h()),null!==localStorage.getItem("globGlass")){i.querySelector(".count-glass").textContent=`${localStorage.getItem("globGlass")}`,i.querySelector(".ml").textContent=`${1e3*parseFloat(localStorage.getItem("prevGoal"))}ml`,g.textContent=localStorage.getItem("done"),u.textContent=localStorage.getItem("remaining");for(let e=0;e<localStorage.getItem("globGlass");e++)localStorage.getItem(`item-${e}`)&&m.insertAdjacentHTML("beforeend",localStorage.getItem(`item-${e}`))}let v;null!==localStorage.getItem("done")&&null!==localStorage.getItem("remaining")?(g.textContent=parseInt(localStorage.getItem("done"))<10?`0${localStorage.getItem("done")}`:localStorage.getItem("done"),u.textContent=parseInt(localStorage.getItem("remaining"))<10?`0${localStorage.getItem("remaining")}`:localStorage.getItem("remaining")):(g.textContent="00",u.textContent="00"),p(),null===m.firstElementChild&&m.insertAdjacentHTML("beforeend",'<h2 class="text-center num-font mb-0">Please set your goal!</h2>');const I=document.querySelector("#ins-pwa");localStorage.getItem("pwa-installed")&&(I.hidden=!0),window.addEventListener("beforeinstallprompt",e=>{e.preventDefault(),v=e,localStorage.removeItem("pwa-installed"),I.style.display="inline-flex",I.addEventListener("click",e=>{I.hidden=!0,v.prompt(),v.userChoice.then(e=>{"accepted"===e.outcome?console.log("User accepted the A2HS prompt"):console.log("User dismissed the A2HS prompt"),v=null})})}),window.addEventListener("appinstalled",e=>{localStorage.setItem("pwa-installed","true")}),document.querySelector(".footer-year").textContent=`${(new Date).getFullYear()}`});